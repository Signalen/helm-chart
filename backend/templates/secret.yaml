apiVersion: v1
kind: Secret
metadata:
  name: {{ template "signals-backend.fullname" . }}
  labels:
    {{- include "signals-backend.labels" . | nindent 4 }}
type: Opaque
data:
  secret-key: {{ randAlphaNum 10 | b64enc }}
  database-password: {{ .Values.settings.database.password | b64enc }}
  rabbitmq-password: {{ .Values.settings.rabbitmq.password | b64enc }}
  email-password: {{ .Values.settings.email.password | quote | b64enc }}
{{- if .Values.settings.sigmax.enabled }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "signals-backend.fullname" . }}-sigmax
  labels:
    {{- include "signals-backend.labels" . | nindent 4 }}
type: Opaque
data:
  auth-token: {{ .Values.settings.sigmax.authToken | b64enc }}
{{- end }}
